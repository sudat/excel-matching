# Excel Matching System - 開発ガイドライン

## 📋 必須参照ドキュメント

このプロジェクトを開発・修正する際は、`.claude`フォルダ内の以下のドキュメントを必ず参照してください。当プロジェクトの設計思想と実装方針を定義した重要な文書です。

### 🔍 開発前の必須確認事項

1. **プロダクト要求仕様書** - `.claude/1-01_prd.md`

   - システムの目的と要件を理解
   - 技術スタック選定の背景を確認
   - ユーザーストーリーと成功指標を把握

2. **システムアーキテクチャ設計** - `.claude/2-01_architecture-design.md`

   - Next.js + FastAPI + Supabase の構成を確認
   - データベース設計と RLS ポリシーを理解
   - 技術的課題と既存の解決策を把握

3. **Excel 分析システム仕様** - `.claude/2-02_excel-analysis-specification.md`
   - Excel/CSV 解析機能の詳細仕様
   - API 仕様（エンドポイント、リクエスト/レスポンス）
   - 表検出アルゴリズムの設計思想

### 🛠️ 実装時の参照ドキュメント

4. **技術実装ガイド** - `.claude/3-01_excel-technical-implementation.md`

   - 実装の詳細とコード例
   - 核心実装コードの解説
   - 表検出アルゴリズムの実装詳細

5. **現在の実装状況** - `.claude/3-02_current-implementation.md`

   - 完了済み機能の確認
   - 技術的制限事項の把握
   - 次の開発フェーズの計画

6. **システム間連携設計** - `.claude/2-03_sequenceDiagram.md`
   - 処理フローの理解
   - ユーザー確認フェーズの重要性
   - AI（LLM）と RAG システムの連携

### 🚨 トラブルシューティング

7. **トラブルシューティングガイド** - `.claude/4-01_troubleshooting-guide.md`
   - よくある問題と解決方法
   - エラーハンドリングの方針
   - デバッグ手順

## 🎯 開発時の基本方針

### 1. 設計原則の遵守

- **ユーザー中心設計**: 経費精算業務の効率化を最優先
- **AI 活用**: 表検出と突合処理での AI/LLM 活用
- **段階的確認**: ユーザーによる段階的確認フローの維持
- **セッション管理**: ステートフルなセッション管理の継続

### 2. 技術スタックの統一

- **フロントエンド**: Next.js 14 + TypeScript + Tailwind CSS
- **バックエンド**: FastAPI + Python
- **データベース**: Supabase (PostgreSQL)
- **AI/LLM**: OpenAI API + RAG システム

### 3. コード品質の維持

- 設計書に記載された命名規則の遵守
- 既存のコードパターンとの整合性の維持
- エラーハンドリングとログ出力の統一
- セキュリティ要件（RLS、入力検証）への準拠

## 📝 開発プロセス

### タスク実行前のチェックリスト

- [ ] 関連する設計書・仕様書を確認済み
- [ ] 既存実装への影響を評価済み
- [ ] API エンドポイントの仕様を確認済み
- [ ] データベーススキーマへの影響を確認済み
- [ ] セッション管理への影響を評価済み

### コード変更時の確認事項

- [ ] 設計書の方針に準拠している
- [ ] 既存のエラーハンドリングパターンを踏襲している
- [ ] 適切なログ出力を実装している
- [ ] セキュリティ要件を満たしている
- [ ] パフォーマンスへの影響を考慮している

## 🔄 ドキュメント更新について

実装中に設計書と実装が乖離した場合や、新たな技術的知見が得られた場合は、関連するドキュメントの更新も検討してください。

## 📞 質問・相談について

技術的な判断に迷った場合は、設計書の意図を優先し、必要に応じてステークホルダーと相談してください。

---

**重要**: このプロジェクトは経費精算業務の効率化を目的とした重要なシステムです。設計書に記載された要件と制約を必ず遵守し、品質の高い実装を心がけてください。
